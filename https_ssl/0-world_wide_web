#!/usr/bin/env bash
# Script to display information about domain and subdomains

display_info() {
    # Parameters: domain, subdomain
    local domain="$1"
    local subdomain="$2"
    
    # Use dig with +short for cleaner output and grep for specific record type
    local record_type
    local destination
    
    # Get the record type (A record)
    record_type=$(dig "$subdomain.$domain" | grep -A1 'ANSWER SECTION:' | awk 'NR==2 {print $4}')
    
    # Get the IP address
    destination=$(dig "$subdomain.$domain" +short)
    
    # Check if we got valid results
    if [ -n "$record_type" ] && [ -n "$destination" ]; then
        echo "The subdomain $subdomain is a $record_type record and points to $destination"
    else
        echo "No valid record found for $subdomain.$domain"
    fi
}

# Main script logic
domain="$1"
subdomain="$2"

# Check if domain parameter is provided
if [ -z "$domain" ]; then
    echo "Error: Domain parameter is required"
    exit 1
fi

if [ -z "$subdomain" ]; then
    # If no subdomain is specified, check default subdomains
    for sub in "www" "44.201.214.23" "54.164.180.162" "100.24.5.99"; do
        display_info "$domain" "$sub"
    done
else
    # If a specific subdomain is provided
    display_info "$domain" "$subdomain"
fi
